(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[687],{17537:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mint",function(){return n(45016)}])},45016:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r=n(85893),a=n(58455),i=n(54306),s=n(44718),l=n(67294),o={src:"/_next/static/media/collection.cb8551fe.png",height:540,width:540,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAWlBMVEU3ePk2ePk3ePo3d/k3ePo3ePo2d/k3ePo3d/o3d/k3d/o2d/k3ePo3d/o3ePo3ePo3d/o3ePo3d/o3d/k3ePk2d/o3d/o3d/k3ePo3ePk3d/o3d/k2d/o2d/nBcte/AAAAGHRSTlMBAQcHFRkZGioqOztFRe7v7/Dw8Pv7/v7scgYEAAAAO0lEQVR42gVAwQ2AQAijBeLD28D9R/RjKDV4DHG3yyPt4VR8r+ybBLNTY9KIAECtZtCuvGp8qFq2Yoc/ykYgOUTaV6MAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},d=n(27894),c=n(21267),u=n(59917),y=n(13550),p=n(32364),f=n(54517),m=n(58467),h=n(66242),g=n(15783),A=[],b=n(48764).Buffer;let k=p.PROGRAM_ID,P=new u.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");async function x(e,t,n,r,a,i,s,l,o,d){let c=await p.CandyMachine.fromAccountAddress(i,t),h=s.nfts().pdas().metadata({mint:a.publicKey}),g=s.nfts().pdas().masterEdition({mint:a.publicKey}),A=s.tokens().pdas().associatedTokenAccount({mint:a.publicKey,owner:n}),x=s.candyMachines().pdas().authority({candyMachine:t}),w=c.collectionMint,S=await s.nfts().findByMint({mintAddress:w}),B=s.nfts().pdas().metadata({mint:w}),K=s.nfts().pdas().masterEdition({mint:w}),v=s.nfts().pdas().metadataDelegateRecord({mint:w,type:"CollectionV1",updateAuthority:S.updateAuthorityAddress,delegate:x}),R={candyGuard:e,candyMachineProgram:k,candyMachine:t,payer:r,minter:n,candyMachineAuthorityPda:x,nftMasterEdition:g,nftMetadata:h,nftMint:a.publicKey,nftMintAuthority:r,token:A,collectionUpdateAuthority:S.updateAuthorityAddress,collectionDelegateRecord:v,collectionMasterEdition:K,collectionMetadata:B,collectionMint:w,tokenMetadataProgram:P,systemProgram:u.SystemProgram.programId,sysvarInstructions:u.SYSVAR_INSTRUCTIONS_PUBKEY,splTokenProgram:m.H_,splAtaProgram:m._u,recentSlothashes:u.SYSVAR_SLOT_HASHES_PUBKEY};c.version==p.AccountVersion.V2&&(R.tokenRecord=s.nfts().pdas().tokenRecord({mint:a.publicKey,token:A})),o||(o=new Uint8Array);let M={mintArgs:o,label:null!=d?d:null},j=[],G=(0,f.createMintV2Instruction)(R,M);for(let e=0;e<G.keys.length;e++)G.keys[e].pubkey.toBase58()===a.publicKey.toBase58()&&(G.keys[e].isSigner=!0,G.keys[e].isWritable=!0);l&&G.keys.push(...l);let _=b.from(Uint8Array.of(0,...new y.BN(6e5).toArray("le",4),...new y.BN(0).toArray("le",4))),E=new u.TransactionInstruction({keys:[],programId:u.ComputeBudgetProgram.programId,data:_});return j.push(E),j.push(G),{instructions:j}}let w=e=>{let{candyMachine:t,payer:n,guard:r,guardType:a}=e,i={startDate:()=>({}),solPayment:()=>({accounts:[{pubkey:r.destination,isSigner:!1,isWritable:!0}]}),allowList:()=>{if(!t.candyGuard)return{};let e={candyGuard:t.candyGuard.address,candyMachine:t.address,payer:n},r=(0,h.y3)(A),a=(0,h.g6)(A,n.toString()),i=b.alloc(4);g.u32.write(i,0,a.length);let s=b.concat([i,...a]),l={args:{guard:f.GuardType.AllowList,data:s},label:null},[o]=u.PublicKey.findProgramAddressSync([b.from("allow_list"),r,n.toBuffer(),t.candyGuard.address.toBuffer(),t.address.toBuffer()],f.PROGRAM_ID),d=(0,f.createRouteInstruction)(e,l);return d.keys.push(...[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:u.SystemProgram.programId,isSigner:!1,isWritable:!1}]),{ixs:[d],accounts:[{pubkey:o,isSigner:!1,isWritable:!1}]}},mintLimit:()=>{var e;if(!t.candyGuard)return{};let[a]=u.PublicKey.findProgramAddressSync([b.from("mint_limit"),new Uint8Array([r.id]),n.toBuffer(),null===(e=t.candyGuard)||void 0===e?void 0:e.address.toBuffer(),t.address.toBuffer()],f.PROGRAM_ID);return{accounts:[{pubkey:a,isSigner:!1,isWritable:!0}]}},tokenBurn:()=>{if(!t.candyGuard)return{};let e=new u.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),[a]=u.PublicKey.findProgramAddressSync([n.toBuffer(),m.H_.toBuffer(),r.mint.toBuffer()],e);return{accounts:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:r.mint,isSigner:!1,isWritable:!0}]}}};return i[a]?i[a]():(console.warn("Couldn't find remaining accounts for Guard "+a+". This can most likely cause the mint tx to fail."),{})},S=(e,t)=>{if(!e.candyGuard)return{};let{guards:n}=e.candyGuard,r=n&&Object.keys(n).filter(e=>n[e]),a=[],i=[];return r.length&&r.forEach(n=>{var r;let s=null===(r=e.candyGuard)||void 0===r?void 0:r.guards[n];if(!s)return null;console.log("Setting up ".concat(n," Guard..."));let{accounts:l,ixs:o}=w({candyMachine:e,payer:t,guard:s,guardType:n});l&&l.length&&a.push(...l),o&&o.length&&i.push(...o)}),{remainingAccounts:a,additionalIxs:i}};var B=n(63409),K=n(25675),v=n.n(K),R=n(48764).Buffer;let M="BOHANIQA";if(!M)throw Error("Please provide a collection name.");let j="10K digital mining machines.";if(!j)throw Error("Please provide a collection description.");let G="J1FMqW26pFkvgqezcS58DEuKgVPsMcPr7P2SugrBBbqa";if(!G)throw Error("Please provide a shift program id.");let _=0;function E(){let e=(0,i.O)(),{publicKey:t}=e,{connection:n}=(0,s.R)(),[y,p]=(0,l.useState)(null),[m,h]=(0,l.useState)(null),[g,A]=(0,l.useState)(null),[b,k]=(0,l.useState)(null),[P,w]=(0,l.useState)(!0);(0,l.useEffect)(()=>{(async()=>{if(e&&n&&!m){let t=new d.I(n).use((0,c.t)(e));p(t);let r=await t.candyMachines().findByAddress({address:new u.PublicKey("HR6cx4amLgGgwDFym2SAySAs8oTamMg3f6HJxnBmMK62")});h(r),w(!1)}})()},[e,n]);let K=(e,t,n)=>new u.TransactionInstruction({programId:new u.PublicKey(G),keys:t,data:R.from([e,...n])}),E=(e,t,n)=>({pubkey:e,isSigner:null!=n&&n,isWritable:null!=t&&t}),I=e=>{let t=new u.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");return u.PublicKey.findProgramAddressSync([B.KA.serialize("metadata"),t.toBytes(),e.toBytes()],t)},T=(e,n,r,a)=>{let i=I(a);return K(6,[E(e[0],!0,!1),E(a,!1,!1),E(i[0],!1,!1),E(t,!0,!0),E(n[0],!0,!1),E(r,!1,!1),E(u.SystemProgram.programId,!1,!1)],[n[1]])},C=(e,t)=>(I(t),K(7,[E(e[0],!0,!1)],[e[1],...Array.from(t.toBytes())])),V=async()=>{if(!y||!m||!t||!m.candyGuard){if(!(null==m?void 0:m.candyGuard))throw Error("This app only works with Candy Guards. Please setup your Guards through Sugar.");throw Error("Couldn't find the Candy Machine or the connection is not defined.")}try{var a;w(!0),A(null),k(null);let{remainingAccounts:i,additionalIxs:s}=S(m,t),l=u.Keypair.generate(),{instructions:o}=await x(null===(a=m.candyGuard)||void 0===a?void 0:a.address,m.address,t,t,l,n,y,i),d=new u.Transaction;(null==s?void 0:s.length)&&d.add(...s),d.add(...o);let c=l.publicKey,p=new u.PublicKey(G),f=B.KA.serialize("employer"),h=u.PublicKey.findProgramAddressSync([f],p),g=B.KA.serialize("employee"),b=u.PublicKey.findProgramAddressSync([g,c.toBytes()],p);d.add(T(h,b,p,c)),d.add(C(b,c)),d.recentBlockhash=(await n.getLatestBlockhash()).blockhash;let P=await e.sendTransaction(d,n,{signers:[l]}),K=await n.getLatestBlockhash();await n.confirmTransaction({blockhash:K.blockhash,lastValidBlockHeight:K.lastValidBlockHeight,signature:P});let v=n.rpcEndpoint.match(/^https:\/\/api\.([^.]+)\.solana\.com/),R=null!=v?v[1]:null,M="https://solscan.io/token/".concat(l.publicKey.toBase58(),"?cluster=").concat(R);++_,A((0,r.jsxs)("span",{children:["Success! View on ",(0,r.jsx)("a",{target:"_blank",title:"BOQ Miner",href:M,children:"solscan"}),"."]})),k(l.publicKey),console.log("MINT ADDRESS",l.publicKey)}catch(t){let e=function(e){let t;let n=/custom program error: (\w+)/.exec(e+"");if(null===n)return null;let[r]=n.slice(1);try{t=parseInt(r,16)}catch(e){return null}return(0,f.errorFromCode)(t)}(t);e?A(e.message):A("Mint failed.")}finally{w(!1)}},D=m?Number(m.itemsMinted)+_:null;return(0,r.jsxs)("div",{style:{display:"flex",gap:"32px",alignItems:"center"},children:[(0,r.jsx)(v(),{alt:"Collection",style:{maxWidth:"396px",borderRadius:"8px"},src:o.src}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:"320px"},children:[(0,r.jsx)("h1",{children:M}),(0,r.jsx)("p",{style:{color:"#807a82",marginTop:"8px",marginBottom:"32px"},children:j}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",background:"#292929",padding:"24px",borderRadius:"8px"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[(0,r.jsx)("span",{children:"Price"}),(0,r.jsx)("b",{children:"0.01 SOL"})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[(0,r.jsx)("span",{style:{fontSize:"12px"},children:"Sold"}),(0,r.jsxs)("span",{style:{fontSize:"12px"},children:[null!=D?D:"-"," / ",1e4]})]}),(0,r.jsxs)("div",{className:"mint",children:[(0,r.jsx)("button",{disabled:!t||P||null!=D&&1e4==D,onClick:V,children:"Mint"}),P&&(0,r.jsx)("span",{className:"indicator"})]}),(0,r.jsx)(a.a,{style:{width:"100%",height:"auto",marginTop:"8px",textAlign:"center",fontSize:"14px",backgroundColor:"#141414",borderRadius:"8px",justifyContent:"center"}}),g&&(0,r.jsx)("div",{className:"message",children:g})]})]})]})}},7420:function(){},46601:function(){}},function(e){e.O(0,[766,59,675,680,774,888,179],function(){return e(e.s=17537)}),_N_E=e.O()}]);